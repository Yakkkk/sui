# Chrony 配置模板
# 用于 Sui Fullnode 的时间同步配置

# 使用公共 NTP 服务器池
pool 0.pool.ntp.org iburst maxsources 4
pool 1.pool.ntp.org iburst maxsources 1
pool 2.pool.ntp.org iburst maxsources 1
pool 3.pool.ntp.org iburst maxsources 2

# 中国区域 NTP 服务器 (可选)
# pool cn.pool.ntp.org iburst maxsources 4

# 记录系统时钟获得/丢失时间的速率
driftfile /var/lib/chrony/drift

# 允许系统时钟可以在前三次更新中步进
makestep 1.0 3

# 启用内核同步RTC
rtcsync

# 指定日志文件的目录
logdir /var/log/chrony

# 允许本地访问
allow 127.0.0.1
allow ::1

# 拒绝其他访问
deny all

# 选择最佳时间源
minsources 2
authselectmode require

# 统计信息
cmdallow 127.0.0.1
cmdallow ::1

# 日志级别
log tracking measurements statistics

# 设置最大时钟调整阈值
maxupdateskew 100.0

# 网络延迟补偿
corrtimeratio 3.0